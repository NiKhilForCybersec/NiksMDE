<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Tenant Management | MDE Ultimate Guide</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="mobile-menu-btn" aria-label="Toggle menu">â˜°</button>
            <a href="index.html" class="logo">
                <div class="logo-icon">MDE</div>
                <div class="logo-text"><span>MDE</span> Ultimate Guide</div>
            </a>
        </div>
        <div class="search-container">
            <button class="search-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <span>Search documentation...</span>
                <span class="search-shortcut"><kbd>âŒ˜</kbd><kbd>K</kbd></span>
            </button>
        </div>
        <div class="header-right">
            <a href="12-2-interview-questions.html" class="header-link">Interview Prep</a>
            <a href="5-3-kql-fundamentals.html" class="header-link">KQL Guide</a>
        </div>
    </header>

    <div class="sidebar-overlay"></div>
    <aside class="sidebar"></aside>

    <main class="main-content">
        <div class="content-wrapper">
            <div class="overview-box">
                <h4>ğŸ¯ What This Page Covers</h4>
                <p>Guide to managing MDE across multiple tenants. Learn about multi-tenant management options, MSSP scenarios, and centralized security operations.</p>
            </div>

            <h1>Multi-Tenant Management</h1>

            <p>Organizations with multiple Azure AD tenants or MSSPs managing multiple customers need multi-tenant MDE management capabilities.</p>

            <h2>Multi-Tenant Scenarios</h2>

            <div class="flow-diagram">
                <div class="diagram-title">Multi-Tenant Architecture</div>
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MULTI-TENANT SCENARIOS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  SCENARIO 1: ENTERPRISE (Multiple Subsidiaries)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    PARENT COMPANY SOC                            â”‚   â”‚
â”‚  â”‚                           â”‚                                       â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚         â–¼                 â–¼                 â–¼                     â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚   â”‚ Tenant A â”‚     â”‚ Tenant B â”‚     â”‚ Tenant C â”‚                â”‚   â”‚
â”‚  â”‚   â”‚ Sub Co 1 â”‚     â”‚ Sub Co 2 â”‚     â”‚ Sub Co 3 â”‚                â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  SCENARIO 2: MSSP (Managed Security Service Provider)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       MSSP SOC                                   â”‚   â”‚
â”‚  â”‚                           â”‚                                       â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚         â–¼                 â–¼                 â–¼                     â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚   â”‚Customer 1â”‚     â”‚Customer 2â”‚     â”‚Customer 3â”‚                â”‚   â”‚
â”‚  â”‚   â”‚  Tenant  â”‚     â”‚  Tenant  â”‚     â”‚  Tenant  â”‚                â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>

            <h2>Management Options</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Multi-Tenant Options</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>MULTI-TENANT MANAGEMENT OPTIONS:

1. MICROSOFT 365 LIGHTHOUSE
   â”œâ”€â”€ Purpose: SMB MSP management
   â”œâ”€â”€ Features:
   â”‚   â”œâ”€â”€ Unified view of tenants
   â”‚   â”œâ”€â”€ Security baseline deployment
   â”‚   â”œâ”€â”€ Threat management
   â”‚   â””â”€â”€ Device compliance
   â”œâ”€â”€ Best for: MSPs managing SMB customers
   â””â”€â”€ Limitation: Not for large enterprise

2. AZURE LIGHTHOUSE
   â”œâ”€â”€ Purpose: Cross-tenant Azure management
   â”œâ”€â”€ Features:
   â”‚   â”œâ”€â”€ Delegated access to customer tenants
   â”‚   â”œâ”€â”€ Manage Azure resources
   â”‚   â”œâ”€â”€ Log Analytics cross-tenant
   â”‚   â””â”€â”€ Azure Sentinel multi-workspace
   â”œâ”€â”€ Best for: Azure-centric management
   â””â”€â”€ MDE integration: Via Sentinel

3. MULTI-TENANT PORTAL (MDE)
   â”œâ”€â”€ Purpose: Native MDE multi-tenant
   â”œâ”€â”€ Features:
   â”‚   â”œâ”€â”€ Single pane for multiple tenants
   â”‚   â”œâ”€â”€ Unified alert view
   â”‚   â”œâ”€â”€ Cross-tenant hunting
   â”‚   â””â”€â”€ Tenant switching
   â”œâ”€â”€ Access: security.microsoft.com
   â””â”€â”€ Best for: Large enterprise, MSSP

4. API-BASED MANAGEMENT
   â”œâ”€â”€ Purpose: Custom multi-tenant solutions
   â”œâ”€â”€ Features:
   â”‚   â”œâ”€â”€ Full API access per tenant
   â”‚   â”œâ”€â”€ Custom dashboards
   â”‚   â”œâ”€â”€ Automated operations
   â”‚   â””â”€â”€ Integration flexibility
   â”œâ”€â”€ Best for: Custom requirements
   â””â”€â”€ Requires: Development effort</code></pre>
                </div>
            </div>

            <h2>MSSP Access Configuration</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">MSSP Setup</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>MSSP ACCESS SETUP:

CUSTOMER TENANT CONFIGURATION:
1. Enable MSSP access in MDE portal
   â”œâ”€â”€ Settings â†’ Endpoints â†’ General â†’ MSSP access
   â”œâ”€â”€ Enable MSSP access
   â””â”€â”€ Provide MSSP tenant ID

2. Grant permissions (Azure AD)
   â”œâ”€â”€ Create guest account for MSSP
   â”œâ”€â”€ Assign appropriate MDE role
   â”‚   â”œâ”€â”€ Security Reader (view only)
   â”‚   â”œâ”€â”€ Security Operator (respond)
   â”‚   â””â”€â”€ Security Administrator (full)
   â””â”€â”€ Add to required groups

MSSP TENANT CONFIGURATION:
1. Accept customer invitation
2. Configure cross-tenant access
3. Set up monitoring workflows
4. Document access and SLAs

PERMISSION MODELS:
â”œâ”€â”€ B2B Guest Access
â”‚   â”œâ”€â”€ MSSP users invited as guests
â”‚   â”œâ”€â”€ Direct access to customer portal
â”‚   â””â”€â”€ Customer controls permissions
â”œâ”€â”€ Azure Lighthouse Delegation
â”‚   â”œâ”€â”€ Service principal access
â”‚   â”œâ”€â”€ Managed at scale
â”‚   â””â”€â”€ Azure-level integration
â””â”€â”€ API Access
    â”œâ”€â”€ App registration in customer tenant
    â”œâ”€â”€ Client credentials flow
    â””â”€â”€ Automated operations</code></pre>
                </div>
            </div>

            <h2>Centralized Monitoring</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Cross-Tenant Monitoring</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>CENTRALIZED MONITORING APPROACHES:

OPTION 1: SENTINEL MULTI-WORKSPACE
â”œâ”€â”€ Each customer has Sentinel workspace
â”œâ”€â”€ Sentinel cross-workspace queries
â”œâ”€â”€ Centralized workbooks
â””â”€â”€ Cost: Each workspace billed separately

SETUP:
1. Connect MDE to Sentinel per tenant
2. Create cross-workspace queries
3. Build unified dashboards

# Cross-workspace query example
let Customer1 = workspace("Customer1-Sentinel").SecurityAlert;
let Customer2 = workspace("Customer2-Sentinel").SecurityAlert;
union Customer1, Customer2
| where TimeGenerated > ago(24h)
| summarize count() by WorkspaceId

OPTION 2: API AGGREGATION
â”œâ”€â”€ Query each tenant via API
â”œâ”€â”€ Aggregate in central platform
â”œâ”€â”€ Custom dashboards
â””â”€â”€ Full flexibility

OPTION 3: SIEM INTEGRATION
â”œâ”€â”€ Stream alerts to central SIEM
â”œâ”€â”€ Use Event Hub per tenant
â”œâ”€â”€ Normalize and aggregate
â””â”€â”€ Existing SIEM investment

ALERTING STRATEGY:
â”œâ”€â”€ Critical: Real-time to central SOC
â”œâ”€â”€ High: Within 15 minutes
â”œâ”€â”€ Medium: Hourly digest
â””â”€â”€ Low: Daily summary</code></pre>
                </div>
            </div>

            <h2>Operational Considerations</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Multi-Tenant Operations</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>OPERATIONAL CONSIDERATIONS:

DATA ISOLATION:
â”œâ”€â”€ Each tenant's data is isolated
â”œâ”€â”€ No cross-tenant data mixing
â”œâ”€â”€ Compliance with data residency
â””â”€â”€ Customer retains data ownership

ACCESS MANAGEMENT:
â”œâ”€â”€ Least privilege per tenant
â”œâ”€â”€ Regular access reviews
â”œâ”€â”€ Audit trail for all actions
â””â”€â”€ Customer visibility into access

SLA MANAGEMENT:
â”œâ”€â”€ Define response SLAs per customer
â”œâ”€â”€ Track metrics per tenant
â”œâ”€â”€ Report separately
â””â”€â”€ Escalation procedures

INCIDENT HANDLING:
â”œâ”€â”€ Clear ownership per tenant
â”œâ”€â”€ Customer communication protocols
â”œâ”€â”€ Evidence handling per tenant
â””â”€â”€ Separate incident queues

BILLING:
â”œâ”€â”€ License per tenant (customer pays)
â”œâ”€â”€ Or MSSP pools licenses
â”œâ”€â”€ Track usage per customer
â””â”€â”€ Transparent cost allocation

COMPLIANCE:
â”œâ”€â”€ Document security controls
â”œâ”€â”€ Regular assessments
â”œâ”€â”€ Compliance reporting
â””â”€â”€ Audit support</code></pre>
                </div>
            </div>

            <div class="callout tip">
                <div class="callout-icon">ğŸ’¡</div>
                <div class="callout-content">
                    <h5>Best Practices</h5>
                    <ul>
                        <li><strong>Standardize</strong>: Use consistent policies and baselines across tenants</li>
                        <li><strong>Automate</strong>: Reduce manual effort with automation</li>
                        <li><strong>Document</strong>: Clear runbooks for each customer</li>
                        <li><strong>Audit</strong>: Regular access reviews and compliance checks</li>
                    </ul>
                </div>
            </div>

            <!-- Interview Tips -->
            <div class="interview-tips">
                <h3>ğŸ’¡ Key Interview Points</h3>
                <ul>
                    <li><strong>Options</strong>: M365 Lighthouse, Azure Lighthouse, Multi-tenant portal, API</li>
                    <li><strong>MSSP access</strong>: B2B guest, Azure delegation, API credentials</li>
                    <li><strong>Sentinel</strong>: Cross-workspace queries for unified view</li>
                    <li><strong>Data isolation</strong>: Each tenant's data stays isolated</li>
                    <li><strong>Key concern</strong>: Least privilege, audit trails, customer visibility</li>
                </ul>
            </div>

            <nav class="page-nav">
                <a href="10-5-migration-strategies.html" class="page-nav-link prev">
                    <span class="page-nav-label">â† Previous</span>
                    <span class="page-nav-title">Migration Strategies</span>
                </a>
                <a href="11-1-soc-workflows.html" class="page-nav-link next">
                    <span class="page-nav-label">Next â†’</span>
                    <span class="page-nav-title">SOC Workflows</span>
                </a>
            </nav>
        </div>
    </main>

    <div class="search-modal">
        <div class="search-modal-content">
            <div class="search-modal-input-wrapper">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <input type="text" class="search-modal-input" placeholder="Search pages..." autofocus>
                <button class="search-modal-close">ESC</button>
            </div>
            <div class="search-results"></div>
        </div>
    </div>
    <script src="main.js"></script>
</body>
</html>
