<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logic Apps Automation | MDE Ultimate Guide</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="mobile-menu-btn" aria-label="Toggle menu">â˜°</button>
            <a href="index.html" class="logo">
                <div class="logo-icon">MDE</div>
                <div class="logo-text"><span>MDE</span> Ultimate Guide</div>
            </a>
        </div>
        <div class="search-container">
            <button class="search-btn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <span>Search documentation...</span>
                <span class="search-shortcut"><kbd>âŒ˜</kbd><kbd>K</kbd></span>
            </button>
        </div>
        <div class="header-right">
            <a href="12-2-interview-questions.html" class="header-link">Interview Prep</a>
            <a href="5-3-kql-fundamentals.html" class="header-link">KQL Guide</a>
        </div>
    </header>

    <div class="sidebar-overlay"></div>
    <aside class="sidebar"></aside>

    <main class="main-content">
        <div class="content-wrapper">
            <div class="overview-box">
                <h4>ğŸ¯ What This Page Covers</h4>
                <p>Complete guide to automating MDE workflows with Azure Logic Apps and Microsoft Sentinel playbooks. Learn to build automated response, enrichment, and notification workflows.</p>
            </div>

            <h1>Logic Apps Automation</h1>

            <p>Azure Logic Apps provides a powerful platform for automating security workflows. When combined with MDE and Microsoft Sentinel, you can build sophisticated SOAR (Security Orchestration, Automation, and Response) capabilities.</p>

            <h2>Logic Apps Architecture</h2>

            <div class="flow-diagram">
                <div class="diagram-title">MDE + Logic Apps Integration</div>
<pre>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LOGIC APPS AUTOMATION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  TRIGGERS                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  Sentinel   â”‚  â”‚  Schedule   â”‚  â”‚   HTTP      â”‚                     â”‚
â”‚  â”‚  Alert      â”‚  â”‚  (Recurrenceâ”‚  â”‚   Webhook   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚         â”‚                â”‚                â”‚                             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                          â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚                    LOGIC APP WORKFLOW                         â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚  â”‚  â”‚  Parse   â”‚â”€â”€â–ºâ”‚  Enrich  â”‚â”€â”€â–ºâ”‚ Conditionâ”‚â”€â”€â–ºâ”‚  Action  â”‚  â”‚      â”‚
â”‚  â”‚  â”‚  Input   â”‚   â”‚  Data    â”‚   â”‚  Logic   â”‚   â”‚  Branch  â”‚  â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚  â”‚                                                               â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                          â”‚                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚         â–¼                â–¼                â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚    MDE      â”‚  â”‚   Teams/    â”‚  â”‚  ServiceNow â”‚                     â”‚
â”‚  â”‚  Actions    â”‚  â”‚   Email     â”‚  â”‚   Ticket    â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                          â”‚
â”‚  MDE CONNECTOR ACTIONS:                                                 â”‚
â”‚  â”œâ”€â”€ Isolate machine                                                   â”‚
â”‚  â”œâ”€â”€ Run antivirus scan                                                â”‚
â”‚  â”œâ”€â”€ Collect investigation package                                     â”‚
â”‚  â”œâ”€â”€ Restrict app execution                                            â”‚
â”‚  â”œâ”€â”€ Get machine information                                           â”‚
â”‚  â”œâ”€â”€ Get alerts                                                        â”‚
â”‚  â””â”€â”€ Add indicators (IOC)                                              â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>

            <h2>Creating a Logic App</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Setup Steps</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>CREATING A LOGIC APP:

AZURE PORTAL METHOD:
1. Azure Portal â†’ Create a resource â†’ Logic App
2. Configure basics:
   â”œâ”€â”€ Subscription: [Your subscription]
   â”œâ”€â”€ Resource Group: [Security-Automation]
   â”œâ”€â”€ Logic App name: MDE-AutoIsolate-Critical
   â”œâ”€â”€ Region: [Your region]
   â””â”€â”€ Plan type: Consumption (pay per execution)
3. Review + Create

SENTINEL PLAYBOOK METHOD:
1. Microsoft Sentinel â†’ Automation â†’ Create â†’ Playbook
2. Choose template or blank
3. Configure trigger type:
   â”œâ”€â”€ When Azure Sentinel alert is triggered
   â”œâ”€â”€ When Azure Sentinel incident is triggered
   â””â”€â”€ When entity is triggered
4. Create and open in Logic Apps Designer

MDE CONNECTOR SETUP:
1. In Logic App Designer â†’ Add action
2. Search "Microsoft Defender for Endpoint"
3. First use: Authenticate with Azure AD
   â”œâ”€â”€ Sign in with account that has MDE permissions
   â”œâ”€â”€ Consent to API permissions
   â””â”€â”€ Connection created automatically
4. Select action (e.g., "Isolate machine")</code></pre>
                </div>
            </div>

            <h2>Auto-Isolate Playbook</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Logic App - Auto-Isolate on Critical Alert</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>PLAYBOOK: Auto-Isolate Critical Threats

TRIGGER: When a Sentinel incident is created
â”œâ”€â”€ Filter: Severity = High or Critical
â””â”€â”€ Filter: Product = Microsoft Defender for Endpoint

STEP 1: Parse incident details
â”œâ”€â”€ Action: Parse JSON
â”œâ”€â”€ Content: Trigger body
â””â”€â”€ Extract: AlertIds, DeviceIds, Severity

STEP 2: For each device in incident
â”œâ”€â”€ Action: For each loop
â”œâ”€â”€ Input: DeviceIds array
â””â”€â”€ Contains actions below

STEP 3: Get device details
â”œâ”€â”€ Action: MDE - Get machine by ID
â”œâ”€â”€ Machine ID: Current item from loop
â””â”€â”€ Output: Device name, status, risk level

STEP 4: Condition - Check if already isolated
â”œâ”€â”€ Condition: Device health status != "Isolated"
â”œâ”€â”€ If true: Continue to isolate
â””â”€â”€ If false: Skip (already isolated)

STEP 5: Isolate machine
â”œâ”€â”€ Action: MDE - Isolate machine
â”œâ”€â”€ Machine ID: Current device ID
â”œâ”€â”€ Isolation type: Full
â””â”€â”€ Comment: "Auto-isolated by playbook - Incident [ID]"

STEP 6: Collect investigation package
â”œâ”€â”€ Action: MDE - Collect investigation package
â”œâ”€â”€ Machine ID: Current device ID
â””â”€â”€ Comment: "Auto-collected for incident [ID]"

STEP 7: Send notification
â”œâ”€â”€ Action: Send Teams message
â”œâ”€â”€ Channel: SOC-Alerts
â”œâ”€â”€ Message: "Device [Name] isolated due to [AlertTitle]"
â””â”€â”€ Include: Device details, incident link

STEP 8: Update incident
â”œâ”€â”€ Action: Update Sentinel incident
â”œâ”€â”€ Status: Active
â”œâ”€â”€ Severity: Keep original
â””â”€â”€ Add comment: "Automated response executed"</code></pre>
                </div>
            </div>

            <h2>Alert Enrichment Playbook</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Logic App - Alert Enrichment</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>PLAYBOOK: Enrich MDE Alerts

TRIGGER: When a Sentinel alert is triggered

STEP 1: Parse alert entities
â”œâ”€â”€ Extract: IP addresses, file hashes, URLs, users
â””â”€â”€ Store in variables

STEP 2: Parallel branch - Enrich each entity type

BRANCH A: IP Enrichment
â”œâ”€â”€ Action: HTTP - VirusTotal IP lookup
â”œâ”€â”€ URL: https://www.virustotal.com/api/v3/ip_addresses/{IP}
â”œâ”€â”€ Headers: x-apikey = [VT API Key]
â”œâ”€â”€ Parse response: Malicious score, country, ASN
â””â”€â”€ Store results

BRANCH B: Hash Enrichment
â”œâ”€â”€ Action: HTTP - VirusTotal file lookup
â”œâ”€â”€ URL: https://www.virustotal.com/api/v3/files/{SHA256}
â”œâ”€â”€ Parse response: Detection ratio, file type, names
â””â”€â”€ Store results

BRANCH C: User Enrichment
â”œâ”€â”€ Action: Azure AD - Get user
â”œâ”€â”€ User ID: From alert entity
â”œâ”€â”€ Get: Department, manager, recent sign-ins
â””â”€â”€ Store results

STEP 3: Aggregate enrichment
â”œâ”€â”€ Compose all enrichment results
â””â”€â”€ Create summary JSON

STEP 4: Update Sentinel incident
â”œâ”€â”€ Action: Add comment to incident
â”œâ”€â”€ Comment: Enrichment summary
â””â”€â”€ Include: Risk assessment, IOC status

STEP 5: Conditional escalation
â”œâ”€â”€ Condition: VT detections > 5 OR IP malicious
â”œâ”€â”€ If true: Change severity to High
â”œâ”€â”€ If true: Send Teams alert to security lead
â””â”€â”€ If false: Standard processing</code></pre>
                </div>
            </div>

            <h2>Scheduled Reporting Playbook</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Logic App - Weekly Security Report</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>PLAYBOOK: Weekly MDE Security Report

TRIGGER: Recurrence
â”œâ”€â”€ Frequency: Week
â”œâ”€â”€ Interval: 1
â”œâ”€â”€ On these days: Monday
â””â”€â”€ At these hours: 8:00 AM

STEP 1: Run Advanced Hunting query
â”œâ”€â”€ Action: HTTP POST to MDE API
â”œâ”€â”€ URL: https://api.securitycenter.microsoft.com/api/advancedhunting/run
â”œâ”€â”€ Body: {
â”‚   "Query": "AlertInfo | where Timestamp > ago(7d) | 
â”‚             summarize Total=count(), Critical=countif(Severity=='Critical')..."
â”‚ }
â””â”€â”€ Parse response

STEP 2: Get device health
â”œâ”€â”€ Action: MDE - Get machines
â”œâ”€â”€ Filter: healthStatus ne 'Active'
â””â”€â”€ Count unhealthy devices

STEP 3: Get vulnerability summary
â”œâ”€â”€ Action: HTTP GET
â”œâ”€â”€ URL: https://api.securitycenter.microsoft.com/api/vulnerabilities
â”œâ”€â”€ Filter: severity eq 'Critical'
â””â”€â”€ Count and list top 5

STEP 4: Create HTML report
â”œâ”€â”€ Action: Compose
â”œâ”€â”€ Build HTML table with:
â”‚   â”œâ”€â”€ Alert summary
â”‚   â”œâ”€â”€ Incident metrics
â”‚   â”œâ”€â”€ Device health status
â”‚   â”œâ”€â”€ Top vulnerabilities
â”‚   â””â”€â”€ Trend comparison
â””â”€â”€ Output: HTML string

STEP 5: Send email report
â”œâ”€â”€ Action: Office 365 Outlook - Send email
â”œâ”€â”€ To: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="e291878197908b969bcf9687838fa2818d8f92838c9bcc818d8f">[email&#160;protected]</a>
â”œâ”€â”€ Subject: Weekly MDE Security Report - [Date]
â”œâ”€â”€ Body: HTML report from Step 4
â””â”€â”€ Importance: Normal

STEP 6: Save to SharePoint (optional)
â”œâ”€â”€ Action: SharePoint - Create file
â”œâ”€â”€ Site: Security Team Site
â”œâ”€â”€ Folder: /Reports/Weekly
â”œâ”€â”€ File name: MDE-Report-[Date].html
â””â”€â”€ Content: HTML report</code></pre>
                </div>
            </div>

            <h2>Common Logic App Patterns</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Useful Patterns</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>PATTERN 1: RETRY ON FAILURE
â”œâ”€â”€ Configure retry policy on HTTP actions
â”œâ”€â”€ Fixed interval: 4 retries, 1 minute apart
â”œâ”€â”€ Or exponential backoff
â””â”€â”€ Handle 429 (rate limit) responses

PATTERN 2: ERROR HANDLING
â”œâ”€â”€ Add "Scope" around critical actions
â”œâ”€â”€ Configure "Run after" on error branch
â”œâ”€â”€ Send alert on failure
â””â”€â”€ Log errors to Log Analytics

PATTERN 3: APPROVAL WORKFLOW
â”œâ”€â”€ Trigger: Critical action needed
â”œâ”€â”€ Action: Send approval email
â”œâ”€â”€ Wait for response (timeout: 1 hour)
â”œâ”€â”€ If approved: Execute action
â””â”€â”€ If rejected/timeout: Log and notify

PATTERN 4: CONDITIONAL EXECUTION
â”œâ”€â”€ Use Condition actions for branching
â”œâ”€â”€ Switch for multiple outcomes
â”œâ”€â”€ Filter arrays with Filter action
â””â”€â”€ Terminate if conditions not met

PATTERN 5: VARIABLE MANAGEMENT
â”œâ”€â”€ Initialize variables at start
â”œâ”€â”€ Use Append to array for collections
â”œâ”€â”€ Increment for counters
â””â”€â”€ Set variable for updates

PATTERN 6: PARALLEL EXECUTION
â”œâ”€â”€ Use Parallel branches for independent tasks
â”œâ”€â”€ Reduces total execution time
â”œâ”€â”€ Use "Join" to wait for all branches
â””â”€â”€ Good for enrichment from multiple sources

PATTERN 7: PAGINATION
â”œâ”€â”€ Handle paginated API responses
â”œâ”€â”€ Use "Until" loop
â”œâ”€â”€ Check for nextLink in response
â”œâ”€â”€ Aggregate results across pages</code></pre>
                </div>
            </div>

            <h2>MDE Connector Actions</h2>

            <div class="code-block">
                <div class="code-header">
                    <span class="code-lang">Available MDE Actions</span>
                    <button class="code-copy">ğŸ“‹ Copy</button>
                </div>
                <div class="code-content">
<pre><code>MDE CONNECTOR ACTIONS:

MACHINE ACTIONS:
â”œâ”€â”€ Get machine by ID
â”œâ”€â”€ Get machines (list all)
â”œâ”€â”€ Isolate machine (Full or Selective)
â”œâ”€â”€ Release from isolation
â”œâ”€â”€ Restrict app execution
â”œâ”€â”€ Remove app restriction
â”œâ”€â”€ Run antivirus scan (Quick or Full)
â”œâ”€â”€ Collect investigation package
â”œâ”€â”€ Offboard machine
â””â”€â”€ Add/remove machine tags

ALERT ACTIONS:
â”œâ”€â”€ Get alert by ID
â”œâ”€â”€ Get alerts (list with filters)
â”œâ”€â”€ Update alert (status, classification)
â””â”€â”€ Create alert (custom)

INDICATOR ACTIONS:
â”œâ”€â”€ Get indicator by ID
â”œâ”€â”€ Get indicators (list all)
â”œâ”€â”€ Create indicator (hash, IP, URL, cert)
â”œâ”€â”€ Update indicator
â””â”€â”€ Delete indicator

INVESTIGATION ACTIONS:
â”œâ”€â”€ Get investigation by ID
â”œâ”€â”€ Get investigations
â”œâ”€â”€ Start automated investigation
â””â”€â”€ Get investigation collection package

ADVANCED HUNTING:
â”œâ”€â”€ Run advanced hunting query
â””â”€â”€ Parse results</code></pre>
                </div>
            </div>

            <div class="callout tip">
                <div class="callout-icon">ğŸ’¡</div>
                <div class="callout-content">
                    <h5>Best Practices</h5>
                    <ul>
                        <li><strong>Test thoroughly</strong>: Use test incidents before production</li>
                        <li><strong>Add logging</strong>: Log all actions for audit trail</li>
                        <li><strong>Handle errors</strong>: Every playbook should have error handling</li>
                        <li><strong>Use managed identities</strong>: More secure than service principals</li>
                        <li><strong>Monitor costs</strong>: Track Logic App execution costs</li>
                    </ul>
                </div>
            </div>

            <!-- Interview Tips -->
            <div class="interview-tips">
                <h3>ğŸ’¡ Key Interview Points</h3>
                <ul>
                    <li><strong>Logic Apps</strong>: Azure's low-code automation platform for workflows</li>
                    <li><strong>Sentinel playbooks</strong>: Logic Apps triggered by Sentinel alerts/incidents</li>
                    <li><strong>MDE connector</strong>: Pre-built actions for isolate, scan, collect package, etc.</li>
                    <li><strong>Common patterns</strong>: Auto-isolate, enrichment, notification, reporting</li>
                    <li><strong>SOAR benefit</strong>: Reduces response time, ensures consistency</li>
                </ul>
            </div>

            <nav class="page-nav">
                <a href="8-6-api-use-cases.html" class="page-nav-link prev">
                    <span class="page-nav-label">â† Previous</span>
                    <span class="page-nav-title">API Use Cases</span>
                </a>
                <a href="8-8-siem-integration.html" class="page-nav-link next">
                    <span class="page-nav-label">Next â†’</span>
                    <span class="page-nav-title">SIEM Integration</span>
                </a>
            </nav>
        </div>
    </main>

    <div class="search-modal">
        <div class="search-modal-content">
            <div class="search-modal-input-wrapper">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="M21 21l-4.35-4.35"></path>
                </svg>
                <input type="text" class="search-modal-input" placeholder="Search pages..." autofocus>
                <button class="search-modal-close">ESC</button>
            </di